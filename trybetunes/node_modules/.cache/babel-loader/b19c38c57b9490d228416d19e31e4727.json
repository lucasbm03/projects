{"ast":null,"code":"var _jsxFileName = \"/home/Lucas/Projetos-Trybe/sd-025-a-project-trybetunes/src/component/MusicCard.jsx\";\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { addSong, getFavoriteSongs } from '../services/favoriteSongsAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class MusicCard extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      isLoading: false,\n      isFavorite: false,\n      favoriteList: ''\n    };\n\n    this.takeFavoriteList = async () => {\n      const favorites = await getFavoriteSongs();\n      this.setState({\n        favoriteList: favorites\n      }, this.isFavorite);\n    };\n\n    this.isFavorite = () => {\n      const {\n        favoriteList\n      } = this.state;\n      const {\n        song\n      } = this.props;\n      const search = favoriteList.some(e => +e.trackId === +song.trackId);\n\n      if (search) {\n        this.setState({\n          isFavorite: true\n        });\n      }\n    };\n\n    this.favoriteSongs = async event => {\n      const {\n        value,\n        checked\n      } = event.target;\n\n      if (checked) {\n        this.setState({\n          isFavorite: true\n        });\n      } else {\n        this.setState({\n          isFavorite: false\n        });\n      }\n\n      this.setState({\n        isLoading: true\n      });\n      await addSong(JSON.parse(value));\n      this.setState({\n        isLoading: false\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.takeFavoriteList();\n  }\n\n  render() {\n    const {\n      song\n    } = this.props;\n    const {\n      isLoading,\n      isFavorite\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: !isLoading ? /*#__PURE__*/_jsxDEV(\"li\", {\n          children: [song.trackName, /*#__PURE__*/_jsxDEV(\"audio\", {\n            \"data-testid\": \"audio-component\",\n            src: song.previewUrl,\n            controls: true,\n            children: [/*#__PURE__*/_jsxDEV(\"track\", {\n              kind: \"captions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 58,\n              columnNumber: 21\n            }, this), \"O seu navegador n\\xE3o suporta o elemento\", /*#__PURE__*/_jsxDEV(\"code\", {\n              children: \"audio\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 60,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: song.trackId,\n            \"data-testid\": `checkbox-music-${song.trackId}`,\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"checkbox\",\n              onChange: this.favoriteSongs,\n              value: JSON.stringify(song),\n              checked: isFavorite,\n              id: song.trackId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 21\n            }, this), \"Favorita\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Carregando...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this);\n  }\n\n}\nMusicCard.propTypes = {\n  song: PropTypes.shape({\n    previewUrl: PropTypes.string.isRequired,\n    trackId: PropTypes.number.isRequired,\n    trackName: PropTypes.string.isRequired\n  }).isRequired\n};","map":{"version":3,"names":["PropTypes","React","Component","addSong","getFavoriteSongs","MusicCard","state","isLoading","isFavorite","favoriteList","takeFavoriteList","favorites","setState","song","props","search","some","e","trackId","favoriteSongs","event","value","checked","target","JSON","parse","componentDidMount","render","trackName","previewUrl","stringify","propTypes","shape","string","isRequired","number"],"sources":["/home/Lucas/Projetos-Trybe/sd-025-a-project-trybetunes/src/component/MusicCard.jsx"],"sourcesContent":["import PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { addSong, getFavoriteSongs } from '../services/favoriteSongsAPI';\n\nexport default class MusicCard extends Component {\n  state = {\n    isLoading: false,\n    isFavorite: false,\n    favoriteList: '',\n  };\n\n  componentDidMount() {\n    this.takeFavoriteList();\n  }\n\n  takeFavoriteList = async () => {\n    const favorites = await getFavoriteSongs();\n    this.setState({ favoriteList: favorites }, this.isFavorite);\n  };\n\n  isFavorite = () => {\n    const { favoriteList } = this.state;\n    const { song } = this.props;\n    const search = favoriteList.some((e) => +e.trackId === +song.trackId);\n    if (search) {\n      this.setState({ isFavorite: true });\n    }\n  };\n\n  favoriteSongs = async (event) => {\n    const { value, checked } = event.target;\n    if (checked) {\n      this.setState({ isFavorite: true });\n    } else {\n      this.setState({ isFavorite: false });\n    }\n    this.setState({ isLoading: true });\n    await addSong(JSON.parse(value));\n    this.setState({ isLoading: false });\n  };\n\n  render() {\n    const { song } = this.props;\n    const { isLoading, isFavorite } = this.state;\n    return (\n      <div>\n        <ul>\n          {\n            !isLoading\n              ? (\n                <li>\n                  {song.trackName}\n                  <audio\n                    data-testid=\"audio-component\"\n                    src={ song.previewUrl }\n                    controls\n                  >\n                    <track kind=\"captions\" />\n                    O seu navegador n√£o suporta o elemento\n                    <code>audio</code>\n                  </audio>\n\n                  <label\n                    htmlFor={ song.trackId }\n                    data-testid={ `checkbox-music-${song.trackId}` }\n                  >\n                    <input\n                      type=\"checkbox\"\n                      onChange={ this.favoriteSongs }\n                      value={ JSON.stringify(song) }\n                      checked={ isFavorite }\n                      id={ song.trackId }\n                    />\n                    Favorita\n                  </label>\n                </li>)\n              : <p>Carregando...</p>\n\n          }\n\n        </ul>\n      </div>\n\n    );\n  }\n}\n\nMusicCard.propTypes = {\n  song: PropTypes.shape({\n    previewUrl: PropTypes.string.isRequired,\n    trackId: PropTypes.number.isRequired,\n    trackName: PropTypes.string.isRequired,\n  }).isRequired,\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}